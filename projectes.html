<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectes</title>

    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.0/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
</head>

<body>
    <a-scene color-space="sRGB" cursor="rayOrigin: mouse" vr-mode-ui="enabled: false">
        <a-sky color="#7FC7D8"></a-sky>

        <a-assets>
            <a-asset-item id="scena" src="assets/models/spongebob__bikini_city.glb"></a-asset-item>
            <a-asset-item id="sandy" src="assets/models/sandy.glb"></a-asset-item>
            <a-asset-item id="bob" src="assets/models/spongebob.glb"></a-asset-item>
            <a-asset-item id="squid" src="assets/models/squidward.glb"></a-asset-item>
            <a-asset-item id="gary" src="assets/models/gary.glb"></a-asset-item>
            <a-asset-item id="plankton" src="assets/models/planton.glb"></a-asset-item>
            <a-asset-item id="krabs" src="assets/models/mrkrab.glb"></a-asset-item>
            <img id="scripts" src="assets/textures/scripts.png" alt="">
            <img id="music" src="assets/textures/Disobey.png" alt="">
            <img id="pintures" src="assets/textures/Davinci.png" alt="">
            <img id="santpere" src="assets/textures/SantPere.png" alt="">
            <img id="whacAMole" src="assets/textures/WhacAMole.png" alt="">
            <img id="rickAndMorty" src="assets/textures/RickAndMorty.png" alt="">
        </a-assets>
        <a-camera position="33.07316 30.25103 -57.35308" rotation="-29.0 151.6 0" look-controls="enabled: false"
            wasd-controls="enabled: false" camera=""
            animation__move="property: position; to: 33.07316 30.25103 -57.35308; dur: 2000; easing: easeInOutQuad"
            animation__look="property: rotation; to: -29.0 151.6 0; dur: 2000; easing: easeInOutQuad"
            data-aframe-inspector-original-camera="">
        </a-camera>
        <a-plane src="#music" position="-0.32661 2.37769 -0.90757"
            rotation="-1.7320514146804786 -113.61982260562276 -5.326215663536133" scale="3 3 2" material=""
            geometry=""></a-plane>
        <a-entity gltf-model="#gary" music animation-mixer="clip: Take 01.001"></a-entity>
        <a-plane src="#scripts" position="-10.26128 2.37769 -17.56293"
            rotation="-1.7320514146804786 49.62158280510008 -5.326215663536133" scale="3 3 2 " material=""
            geometry=""></a-plane>
        <a-entity gltf-model="#bob" botiga></a-entity>
        <a-plane src="#pintures" position="-10.26128 2.37769 -17.56293"
            rotation="-1.7320514146804786 49.62158280510008 -5.326215663536133" scale="3 3 2 " material=""
            geometry=""></a-plane>

        <a-entity gltf-model="#plankton" pintures></a-entity>
        <a-entity gltf-model="#scena" animation-mixer="clip: Take 01"></a-entity>
        <a-plane src="#santpere" position="8.22246 0.67095 6.97278"
            rotation="-1.7320514146804786 -79.99999999999999 -5.326215663536133" scale="3 3 2" material=""
            geometry=""></a-plane>
        <a-entity gltf-model="#krabs" santpere position="8.2445 0 4.72173" rotation="0 -50.11547242450285 0"
            scale="0.2 0.2 0.2"></a-entity>
        <a-plane src="#whacAMole" position="-0.32079 1.5903 16.0165" rotation="180 0 180" scale="4 3 2" material=""
            geometry=""></a-plane>
        <a-entity gltf-model="#sandy" whacamole position="1.60755 0.35153 15.0165" rotation="83.04 73.91 -106.19"
            animation-mixer="clip: sandy_jjk_sandy_skeleton|Victory">
            <a-box scale="1 1 2.57177" position="0.0004 0.89245 0.00361" depth="2" height="2" width="2" visible="false"
                class="clickable" material="" geometry=""></a-box>
        </a-entity>


        <a-plane src="#rickAndMorty" position="-11.48497 0.36685 4.91919" rotation="0 110.55277952828747 0"
            scale="3 3 2" material="" geometry=""></a-plane>
        <a-entity gltf-model="#squid" rickandmorty position="-10.02138 0 3.54962" rotation="0 166.48 0"
            scale="0.2 0.2 0.2" animation-mixer="clip: 032_SquidWard_Victory">
            <a-box scale="1 6.87214 5.88521" position="0.0004 0.89245 0.00361" depth="2" height="2" width="2"
                visible="false" class="clickable" material="" geometry=""></a-box>
        </a-entity>

    </a-scene>

    <div id="ui-menu">
        <button id="prev" class="arrow-btn">◀</button>
        <span id="label">Inicio</span>
        <button id="next" class="arrow-btn">▶</button>
    </div>
    <div id="back-menu">
        <button id="back" class="arrow-btn">◀ Go back</button>
    </div>
    <style>
        #ui-menu {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(100, 90, 70, 0.7);
            border-radius: 40px;
            padding: 10px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'Poppins', sans-serif;
            color: white;
            font-size: 1.2rem;
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
            z-index: 999;
        }

        #back-menu {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(100, 90, 70, 0.7);
            border-radius: 40px;
            padding: 10px 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-family: 'Poppins', sans-serif;
            color: white;
            font-size: 1.2rem;
            backdrop-filter: blur(8px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.25);
            z-index: 999;
        }

        #label {
            pointer-events: none;
            font-weight: 500;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            min-width: 140px;
            text-align: center;
        }

        .arrow-btn {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .arrow-btn:hover {
            transform: scale(1.3);
        }
    </style>
    <script>
        AFRAME.registerComponent('botiga', {
            init: function () {
                this.el.addEventListener('click', function () {
                    window.location.href = "https://asanchez.netlify.app/exercicis/ex1/html/botiga";
                });
            }
        });
        AFRAME.registerComponent('music', {
            init: function () {
                this.el.addEventListener('click', function () {
                    window.location.href = "https://asanchez.netlify.app/exercicis/ex2/html/music";
                });
            }
        });
        AFRAME.registerComponent('pintures', {
            init: function () {
                this.el.addEventListener('click', function () {
                    window.location.href = "https://asanchez.netlify.app/exercicis/ex3/html/pintures";
                });
            }
        });
        AFRAME.registerComponent('santpere', {
            init: function () {
                this.el.addEventListener('click', function () {
                    window.location.href = "https://asanchez.netlify.app/exercicis/ex4/html/santpere";
                });
            }
        });
        AFRAME.registerComponent('whacamole', {
            init: function () {
                this.el.addEventListener('click', function () {
                    window.location.href = "https://asanchez.netlify.app/exercicis/ex5/html/";
                });
            }
        });
        AFRAME.registerComponent('rickandmorty', {
            init: function () {
                this.el.addEventListener('click', function () {
                    window.location.href = "https://asanchez.netlify.app/exercicis/ex6/html/";
                });
            }
        });

        const camera = document.querySelector('a-camera');
        const label = document.getElementById('label');

        const escenas = [
            { nombre: 'Inici', posicion: '33.07316 30.25103 -57.35308', rotacion: '-29.0 151.6 0' },
            { nombre: 'Botiga de scripts', posicion: '-6.00052 3.92269 -13.12781', rotacion: '-14.9 90 0' },
            { nombre: 'Grup de musica Disobey', posicion: '-4.42051 3.55954 -2', rotacion: '-25.0 -63.2 0' },
            { nombre: 'Pintures de Da Vinci', posicion: '-5.32645 2.17739 -15.61072', rotacion: '0 -180 0' },
            { nombre: 'Sant Pere', posicion: '4.20844 3.08324 6.20495', rotacion: '-14.9 300 0' },
            { nombre: 'Joc del Whac A mole', posicion: '0.35411 3.62045 9.06482', rotacion: '-14.9 200 0' },
            { nombre: 'Buscador de Rick and Morty', posicion: '-5.57915 3.66517 3.89233', rotacion: '-14.9 70 0' }

        ];

        let indice = 0;

        function cambiarEscena(delta) {
            indice = (indice + delta + escenas.length) % escenas.length;
            const escena = escenas[indice];
            label.textContent = escena.nombre;

            camera.setAttribute('animation__move', {
                property: 'position',
                to: escena.posicion,
                dur: 2000,
                easing: 'easeInOutQuad'
            });
            camera.setAttribute('animation__look', {
                property: 'rotation',
                to: escena.rotacion,
                dur: 2000,
                easing: 'easeInOutQuad'
            });
        }
        document.getElementById('back').addEventListener('click', () => {
            window.location.href = "main.html";
        });
        document.getElementById('next').addEventListener('click', () => cambiarEscena(1));
        document.getElementById('prev').addEventListener('click', () => cambiarEscena(-1));
    </script>
</body>

</html>